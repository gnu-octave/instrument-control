
SUBDIRS = serial parallel i2c usbtmc tcp gpib vxi11

MKOCTFILE ?= mkoctfile

.PHONY: clean
.PHONY: realclean
.PHONY: distclean
.PHONY: $(SUBDIRS)

all: $(SUBDIRS)

$(SUBDIRS):
	$(MAKE) -C $@

CLEANDIRS = $(SUBDIRS:%=clean-%)
DISTCLEANDIRS = $(SUBDIRS:%=distclean-%)

.PHONY: $(CLEANDIRS)
.PHONY: $(DISTCLEANDIRS)

$(CLEANDIRS):
	$(MAKE) -C $(@:clean-%=%) clean
	
$(DISTCLEANDIRS):
	$(MAKE) -C $(@:distclean-%=%) distclean

clean: $(CLEANDIRS)

realclean:
	rm -f *.oct

distclean: realclean $(DISTCLEANDIRS)
	rm -rf autom4te.cache
	rm -f Makefile config.status config.log config.h configure
