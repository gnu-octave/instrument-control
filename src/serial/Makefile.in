OCT := serial.oct
OBJ := serial.o srl_write.o srl_read.o __srl_properties__.o

ifeq ("@BUILD_FOR_WINDOWS@","1")
  OBJ += serial_class_win32.o 
else
  OBJ += serial_class_lin.o
endif

MKOCTFILE ?= mkoctfile

CFLAGS     = @DEFS@

all: $(OBJ) $(OCT)

%.o: %.cc
	$(MKOCTFILE) $(CFLAGS) -c $^

%.oct: %.o $(OBJ)
	$(MKOCTFILE) $^ -o ../$@

clean:
	rm -f *.oct *.o

distclean: clean
	rm Makefile

.PHONY: all clean
